"use strict";(self["webpackChunkmetawall"]=self["webpackChunkmetawall"]||[]).push([[646],{2587:function(t,s,e){e.d(s,{A:function(){return A}});var o=e(6768),a=e(4232),i=e(5130);const r=t=>((0,o.Qi)("data-v-7e57d052"),t=t(),(0,o.jt)(),t),c={class:"post border bg-white radius shadow"},n={class:"header"},l=["src"],d={class:"info"},h={class:"content"},p={key:0,class:"image-wrapper border radius"},u=["src"],m=r((()=>(0,o.Lk)("span",{class:"material-icons"}," thumb_up_off_alt ",-1))),k={class:"comment-wrapper"},b=["src"],L={class:"comment border"},f={for:"comment"},g={class:"header"},$=["src"],_={class:"info"};function v(t,s,e,r,v,w){const P=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",n,[(0,o.bF)(P,{class:"user-photo border circle btn",to:{path:`/profile/${v.post.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:w.photo,alt:"",onLoad:s[0]||(s[0]=(...s)=>t.successLoadImg&&t.successLoadImg(...s))},null,40,l)])),_:1},8,["to"]),(0,o.Lk)("div",d,[(0,o.bF)(P,{class:"btn fw-bold",to:{path:`/profile/${v.post.user._id}`}},{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(v.post.user.name),1)])),_:1},8,["to"]),(0,o.Lk)("span",null,(0,a.v_)(t.$filters.date(v.post.createdAt)),1)])]),(0,o.Lk)("p",h,(0,a.v_)(v.post.content),1),v.post.image?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",{class:"clamp",style:(0,a.Tr)(v.paddingBottom)},[(0,o.Lk)("img",{ref:"postsPhoto",class:"hide",src:v.post.image,alt:"",onLoad:s[1]||(s[1]=s=>(t.successLoadImg,w.size()))},null,40,u)],4)])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:(0,a.C4)([{selected:w.isSelected},"likes btn"]),type:"button",onClick:s[2]||(s[2]=t=>w.toggle(w.isSelected))},[m,(0,o.eW)(" "+(0,a.v_)(0==v.post.likes.length?"成為第一個按讚的朋友":v.post.likes.length),1)],2),(0,o.Lk)("div",k,[(0,o.bF)(P,{class:"user-photo border circle btn",to:{path:`/profile/${w.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:w.user.photo,alt:"",onLoad:s[3]||(s[3]=(...s)=>t.successLoadImg&&t.successLoadImg(...s))},null,40,b)])),_:1},8,["to"]),(0,o.Lk)("div",L,[(0,o.Lk)("label",f,[(0,o.bo)((0,o.Lk)("input",{id:"comment","onUpdate:modelValue":s[4]||(s[4]=t=>v.comment=t),type:"text",placeholder:"留言...",onKeyup:s[5]||(s[5]=(0,i.jR)(((...t)=>v.comment&&v.comment(...t)),["enter"]))},null,544),[[i.Jo,v.comment]])]),(0,o.Lk)("button",{class:"btn",type:"button",onClick:s[6]||(s[6]=(...t)=>w.send&&w.send(...t))},"留言")])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(v.post.comments,((e,i)=>((0,o.uX)(),(0,o.CE)("div",{key:i,class:"comments"},[(0,o.Lk)("div",g,[(0,o.bF)(P,{class:"user-photo border circle btn",to:{path:`/profile/${e.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:""!==e.user.photo?e.user.photo:v.commentPhoto,alt:"",onLoad:s[7]||(s[7]=(...s)=>t.successLoadImg&&t.successLoadImg(...s))},null,40,$)])),_:2},1032,["to"]),(0,o.Lk)("div",_,[(0,o.bF)(P,{class:"btn fw-bold",to:{path:`/profile/${e.user._id}`}},{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.user.name),1)])),_:2},1032,["to"]),(0,o.Lk)("span",null,(0,a.v_)(t.$filters.date(e.createdAt)),1)])]),(0,o.Lk)("p",null,(0,a.v_)(e.comment),1)])))),128))])}var w={name:"PostsCMPT",props:["tempPost"],data(){return{post:{},comment:"",paddingBottom:{},commentPhoto:"https://i.imgur.com/IZLtAAb.jpg"}},watch:{tempPost:{handler(){this.post=this.tempPost},deep:!0,immediate:!0}},computed:{user(){return this.$store.state.user},photo(){const{photo:t}=this.post.user;return""===t?"https://i.imgur.com/IZLtAAb.jpg":t},isSelected(){const{likes:t}=this.post;return t.includes(this.user._id)}},methods:{isToday(t){return this.moment(t).format("YYYY/MM/DD hh:mm")},toggle(t){this.$store.commit("Load",!0);const s=`https://metawall-backend-c89d.onrender.com/post/${this.post._id}/likes`,{headers:e}=this.$store.state,o=t?this.$http.delete(s,e):this.$http.post(s,null,e);o.then((()=>{this.upload()})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))},send(){if(""!==this.comment){this.$store.commit("Load",!0);const t=`https://metawall-backend-c89d.onrender.com/post/${this.post._id}/comment`,{headers:s}=this.$store.state,e={comment:this.comment};this.$http.post(t,e,s).then((()=>{this.comment="",this.upload()})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))}},upload(){this.$store.commit("Load",!0);const t=`https://metawall-backend-c89d.onrender.com/post/${this.post._id}`,{headers:s}=this.$store.state;this.$http.get(t,s).then((t=>{this.post=t.data.post})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))},size(){if(this.$refs.postsPhoto){const{height:t}=this.$refs.postsPhoto,{width:s}=this.$refs.postsPhoto,e=t/s*100;this.paddingBottom={paddingBottom:e>150?"150%":`${e}%`}}}}},P=e(1241);const y=(0,P.A)(w,[["render",v],["__scopeId","data-v-7e57d052"]]);var A=y},6678:function(t,s,e){e.d(s,{A:function(){return u}});var o=e(6768),a=e(4232);const i=t=>((0,o.Qi)("data-v-78caa541"),t=t(),(0,o.jt)(),t),r={class:"border bg-white shadow radius"},c=i((()=>(0,o.Lk)("ul",{class:"ball-group"},[(0,o.Lk)("li",{class:"ball circle"}),(0,o.Lk)("li",{class:"ball circle"}),(0,o.Lk)("li",{class:"ball circle"})],-1))),n={class:"content"};function l(t,s,e,i,l,d){return(0,o.uX)(),(0,o.CE)("div",r,[c,(0,o.Lk)("div",n,(0,a.v_)(d.message),1)])}var d={name:"PostsNoneCMPT",computed:{message(){return this.$route.query.q?`找不到符合「${this.$route.query.q}」的貼文`:"profile"===this.$route.name?"目前尚無貼文":"like_list"===this.$route.name?"目前尚無動態，按讚一則貼文吧！":"follow_list"===this.$route.name?"目前尚無名單，追蹤一位朋友吧！":"目前尚無動態，新增一則貼文吧！"}}},h=e(1241);const p=(0,h.A)(d,[["render",l],["__scopeId","data-v-78caa541"]]);var u=p},8132:function(t,s,e){e.d(s,{A:function(){return u}});var o=e(6768),a=e(4232);const i=t=>((0,o.Qi)("data-v-32e32aff"),t=t(),(0,o.jt)(),t),r={class:"title"},c={class:"border bg-white"},n=i((()=>(0,o.Lk)("div",{class:"mat border bg-white"},null,-1)));function l(t,s,e,i,l,d){return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("h1",c,(0,a.v_)(e.title),1),n])}var d={name:"TitleCMPT",props:["title"]},h=e(1241);const p=(0,h.A)(d,[["render",l],["__scopeId","data-v-32e32aff"]]);var u=p},4646:function(t,s,e){e.r(s),e.d(s,{default:function(){return w}});var o=e(6768),a=e(4232);const i=t=>((0,o.Qi)("data-v-9585e93c"),t=t(),(0,o.jt)(),t),r={class:"like-list"},c=["src"],n={class:"info"},l={class:"created"},d=["onClick"],h=i((()=>(0,o.Lk)("span",{class:"material-icons"}," thumb_up_off_alt ",-1))),p=(0,o.eW)(" 取消 "),u=[h,p],m=i((()=>(0,o.Lk)("span",{class:"material-icons"}," arrow_circle_up ",-1))),k=(0,o.eW)(" 查看 ");function b(t,s,e,i,h,p){const b=(0,o.g2)("Title"),L=(0,o.g2)("router-link"),f=(0,o.g2)("Posts"),g=(0,o.g2)("PostsNone");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(b,{title:"我按讚的貼文"}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(h.posts,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"card border bg-white shadow radius"},[(0,o.bF)(L,{class:"user-photo border circle btn",to:{path:`/profile/${e.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:e.user.photo||h.photo,alt:"",onLoad:s[0]||(s[0]=(...s)=>t.successLoadImg&&t.successLoadImg(...s))},null,40,c)])),_:2},1032,["to"]),(0,o.Lk)("div",n,[(0,o.bF)(L,{class:"fw-bold btn",to:{path:`/profile/${e.user._id}`}},{default:(0,o.k6)((()=>[(0,o.eW)((0,a.v_)(e.user.name),1)])),_:2},1032,["to"]),(0,o.Lk)("span",l,"發文時間："+(0,a.v_)(t.$filters.date(e.createdAt)),1)]),(0,o.Lk)("button",{class:"cancel btn fw-bold",type:"button",onClick:t=>p.unlike(e._id)},u,8,d),(0,o.bF)(L,{class:"check btn fw-bold",to:{path:"/like_list",query:{id:`${e._id}`}}},{default:(0,o.k6)((()=>[m,k])),_:2},1032,["to"])])))),128)),Object.keys(h.post).length>0?((0,o.uX)(),(0,o.Wv)(f,{key:0,tempPost:h.post},null,8,["tempPost"])):(0,o.Q3)("",!0),0==h.posts.length&&0==Object.keys(h.post).length&&h.load?((0,o.uX)(),(0,o.Wv)(g,{key:1})):(0,o.Q3)("",!0)])}var L=e(8132),f=e(2587),g=e(6678),$={name:"LikeListView",components:{Title:L.A,Posts:f.A,PostsNone:g.A},data(){return{posts:[],post:{},photo:"https://i.imgur.com/IZLtAAb.jpg",load:!1}},watch:{$route:{handler(){return this.load=!1,this.posts=[],this.post={},this.$route.query.id?this.getPost():this.getList()},immediate:!0}},methods:{getList(){this.$store.commit("Load",!0);const t="https://metawall-backend-c89d.onrender.com/user/likeList",{headers:s}=this.$store.state;this.$http.get(t,s).then((t=>{const{posts:s}=t.data;this.posts=s})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1),this.load=!0}))},getPost(){this.$store.commit("Load",!0);const{id:t}=this.$route.query,s=`https://metawall-backend-c89d.onrender.com/post/${t}`,{headers:e}=this.$store.state;this.$http.get(s,e).then((t=>{const{post:s}=t.data;this.post=s})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1),this.load=!0}))},unlike(t){this.$store.commit("Load",!0);const s=`https://metawall-backend-c89d.onrender.com/post/${t}/likes`,{headers:e}=this.$store.state;this.$http.delete(s,e).then((()=>{this.getList()})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))}}},_=e(1241);const v=(0,_.A)($,[["render",b],["__scopeId","data-v-9585e93c"]]);var w=v}}]);
//# sourceMappingURL=646.4e20405e.js.map