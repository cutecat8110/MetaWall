"use strict";(self["webpackChunkmetawall"]=self["webpackChunkmetawall"]||[]).push([[890],{7890:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var a=s(6768);const o={class:"posts-wall"},n={class:"container"};function r(e,t,s,r,l,c){const i=(0,a.g2)("Header"),d=(0,a.g2)("router-view"),m=(0,a.g2)("AsideNav");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(i),(0,a.Lk)("main",n,[(0,a.Lk)("article",null,[(0,a.bF)(d)]),(0,a.Lk)("aside",null,[(0,a.bF)(m)])])])}const l=e=>((0,a.Qi)("data-v-62447cb8"),e=e(),(0,a.jt)(),e),c={class:"container"},i=(0,a.eW)("MetaWall"),d={ref:"memberWrapper",class:"member-wrapper"},m={class:"user-photo border circle"},u=["src"],b=l((()=>(0,a.Lk)("span",{class:"member-text"},"Member",-1))),p={key:0,ref:"memberDropdown",class:"border bg-white dropdown-wrapper"},h={class:"border bg-white dropdown"},k={class:"btn"},f=(0,a.eW)(" 我的貼文牆 "),g={class:"btn"},v=(0,a.eW)(" 修改個人資料 ");function w(e,t,s,o,n,r){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("header",null,[(0,a.Lk)("div",c,[(0,a.bF)(l,{class:"btn logo",to:"/"},{default:(0,a.k6)((()=>[i])),_:1}),(0,a.Lk)("div",d,[(0,a.Lk)("button",{class:"member-btn btn",type:"button",onClick:t[1]||(t[1]=e=>r.toggle())},[(0,a.Lk)("div",m,[(0,a.Lk)("img",{class:"hide",src:r.user.photo,alt:"",onLoad:t[0]||(t[0]=(...t)=>e.successLoadImg&&e.successLoadImg(...t))},null,40,u)]),b]),n.select?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("ul",h,[(0,a.Lk)("li",k,[(0,a.bF)(l,{class:"btn link",to:{path:`/profile/${r.user._id}`},onClick:r.toggle},{default:(0,a.k6)((()=>[f])),_:1},8,["to","onClick"])]),(0,a.Lk)("li",g,[(0,a.bF)(l,{class:"btn link",to:{path:"/setting"},onClick:r.toggle},{default:(0,a.k6)((()=>[v])),_:1},8,["onClick"])]),(0,a.Lk)("li",{class:"btn",onClick:t[2]||(t[2]=e=>r.signOut()),onKeyup:t[3]||(t[3]=e=>r.signOut())},"登出",32)])],512)):(0,a.Q3)("",!0)],512)])])}var L={name:"HeaderCMPT",data(){return{select:!1}},mounted(){document.addEventListener("click",this.memberDropdownClick),window.addEventListener("resize",this.memberDropdownOffset)},updated(){this.$refs.memberDropdown&&this.memberDropdownOffset()},beforeUnmount(){document.removeEventListener("click",this.memberDropdownClick),window.removeEventListener("resize",this.memberDropdownOffset)},watch:{$route(){this.select=!1}},computed:{user(){const{user:e}=this.$store.state;return e}},methods:{toggle(){this.select=!this.select},memberDropdownClick(e){if(this.$refs.memberDropdown){const t=this.$refs.memberWrapper.contains(e.target);t||(this.select=!1)}},memberDropdownOffset(){if(this.$refs.memberDropdown){const e=getComputedStyle(document.documentElement).fontSize.replace(/[^0-9]+(.[0-9]{2})?$/gi,""),t=document.body.clientWidth,s=this.$refs.memberDropdown.getBoundingClientRect().width,a=this.$refs.memberWrapper.getBoundingClientRect().x;if(t-e<a+s){const o=t-s-a-e+5;this.$refs.memberDropdown.style.transform=`translate(${o}px,100%)`}}},signOut(){localStorage.removeItem("authorization"),this.$router.push({name:"sign_in"})}}},_=s(1241);const C=(0,_.A)(L,[["render",w],["__scopeId","data-v-62447cb8"]]);var $=C,D=s(4232);const F=e=>((0,a.Qi)("data-v-2184434c"),e=e(),(0,a.jt)(),e),I={class:"aside-nav"},y={class:"nav border bg-white"},A=F((()=>(0,a.Lk)("span",{class:"fw-bold btn post radius"}," 張貼動態 ",-1))),E=F((()=>(0,a.Lk)("div",{class:"border btn circle"},[(0,a.Lk)("span",{class:"material-icons"}," add ")],-1))),W={class:"user-photo border circle"},O=["src"],H={class:"fw-bold"},x=F((()=>(0,a.Lk)("div",{class:"btn-icon border circle"},[(0,a.Lk)("span",{class:"material-icons"}," notifications_none ")],-1))),z=F((()=>(0,a.Lk)("span",{class:"fw-bold"},"追蹤名單",-1))),M=F((()=>(0,a.Lk)("div",{class:"btn-icon border circle"},[(0,a.Lk)("span",{class:"material-icons"}," thumb_up_off_alt ")],-1))),X=F((()=>(0,a.Lk)("span",{class:"fw-bold"},"我按讚的文章",-1))),j=(0,a.Fv)('<div class="copyright border radius" data-v-2184434c><ul class="external-link" data-v-2184434c><li data-v-2184434c><a class="btn" href="https://github.com/cutecat8110/metawall" target="_blank" data-v-2184434c><span class="material-icons" data-v-2184434c> desktop_windows </span> 前端 </a></li><li data-v-2184434c><a class="btn" href="https://metawall-backend-c89d.onrender.com/api-docs/" target="_blank" data-v-2184434c><span class="material-icons" data-v-2184434c> settings_ethernet </span> API </a></li><li data-v-2184434c><a class="btn" href="https://github.com/cutecat8110/metawall_backend" target="_blank" data-v-2184434c><span class="material-icons" data-v-2184434c> storage </span> 後端 </a></li></ul> Copyright © 2022 by Hao / 作品展示 </div>',1);function N(e,t,s,o,n,r){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",I,[(0,a.Lk)("ul",y,[(0,a.Lk)("li",null,[(0,a.bF)(l,{class:"btn",to:"/post"},{default:(0,a.k6)((()=>[A,E])),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(l,{class:"btn link",to:{path:`/profile/${r.user._id}`}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",W,[(0,a.Lk)("img",{class:"hide",src:r.user.photo,alt:"",onLoad:t[0]||(t[0]=(...t)=>e.successLoadImg&&e.successLoadImg(...t))},null,40,O)]),(0,a.Lk)("span",H,(0,D.v_)(r.user.name),1)])),_:1},8,["to"])]),(0,a.Lk)("li",null,[(0,a.bF)(l,{class:"btn link",to:{path:"/follow_list"}},{default:(0,a.k6)((()=>[x,z])),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(l,{class:"btn link",to:{path:"/like_list"}},{default:(0,a.k6)((()=>[M,X])),_:1})])]),j])}var P={name:"AsideNavCMPT",computed:{user(){const{user:e}=this.$store.state;return e}}};const Q=(0,_.A)(P,[["render",N],["__scopeId","data-v-2184434c"]]);var S=Q,B={name:"HomeView",components:{Header:$,AsideNav:S},created(){this.$store.commit("Load",!0);const e="https://metawall-backend-c89d.onrender.com/user/profile",{headers:t}=this.$store.state;this.$http.get(e,t).then((e=>{const{user:t}=e.data;delete t.followers,delete t.following,""===t.photo&&(t.photo="https://i.imgur.com/IZLtAAb.jpg"),this.$store.commit("user",t)})).catch((e=>{console.error(e)})).then((()=>{this.$store.commit("Load",!1)}))}};const R=(0,_.A)(B,[["render",r],["__scopeId","data-v-85b53b72"]]);var T=R}}]);
//# sourceMappingURL=890.8d3f560a.js.map