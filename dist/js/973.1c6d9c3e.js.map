{"version":3,"file":"js/973.1c6d9c3e.js","mappings":"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","sources":["webpack://metawall/./src/views/PostsWall.vue","webpack://metawall/./src/components/Posts.vue","webpack://metawall/./src/components/Posts.vue?de1f","webpack://metawall/./src/components/PostsNone.vue","webpack://metawall/./src/components/PostsNone.vue?21e1","webpack://metawall/./src/views/PostsWall.vue?420c"],"sourcesContent":["<template>\n  <div class=\"posts-wall\">\n    <div class=\"subnav\">\n      <div ref=\"filterWrapper\" class=\"filter-wrapper\">\n        <button type=\"button\" class=\"btn border bg-white filter\" @click=\"toggle()\">\n          {{ asc ? '最舊貼文' : '最新貼文' }}\n          <span class=\"material-icons\">expand_more</span>\n        </button>\n        <div ref=\"filterDropdown\" v-if=\"select\" class=\"border bg-white dropdown-wrapper\">\n          <ul class=\"border bg-white dropdown\">\n            <li>\n              <router-link :to=\"{ query: query('desc') }\" class=\"btn\" @click=\"toggle()\">\n                最新貼文\n                <span v-if=\"!asc\" class=\"material-icons\">check</span>\n              </router-link>\n            </li>\n            <li>\n              <router-link :to=\"{ query: query('asc') }\" class=\"btn\" @click=\"toggle()\">\n                最舊貼文\n                <span v-if=\"asc\" class=\"material-icons\">check</span>\n              </router-link>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"border bg-white search\">\n        <label for=\"search\">\n          <input\n            id=\"search\"\n            v-model=\"search\"\n            type=\"text\"\n            placeholder=\"搜尋貼文\"\n            @keyup.enter=\"searchEnter\"\n          />\n        </label>\n        <router-link :to=\"{ query: query() }\" class=\"btn\">\n          <span class=\"material-icons\"> search </span>\n        </router-link>\n      </div>\n    </div>\n    <PostsNone v-if=\"posts.length == 0\"></PostsNone>\n    <Posts v-for=\"item in posts\" :key=\"item._id\" :tempPost=\"item\"></Posts>\n  </div>\n</template>\n\n<script>\nimport Posts from '@/components/Posts.vue';\nimport PostsNone from '@/components/PostsNone.vue';\n\nexport default {\n  name: 'PostsWallView',\n  components: {\n    Posts,\n    PostsNone,\n  },\n  data() {\n    return {\n      select: false,\n      posts: {},\n      search: '',\n      asc: false,\n    };\n  },\n  mounted() {\n    this.getPosts();\n    document.addEventListener('click', this.filterDropdownClick);\n  },\n  beforeUnmount() {\n    document.removeEventListener('click', this.filterDropdownClick);\n  },\n  watch: {\n    $route() {\n      if (this.$route.name === 'posts_wall') this.getPosts();\n    },\n  },\n  methods: {\n    getPosts() {\n      this.$store.commit('Load', true);\n      const api = `${process.env.VUE_APP_API}/posts${this.$route.fullPath}`;\n      const headers = {\n        headers: {\n          authorization: localStorage.getItem('authorization'),\n        },\n      };\n      this.$http.get(api, headers).then((res) => {\n        this.asc = this.$route.query.timeSort === 'asc';\n        this.search = this.$route.query.q ? this.$route.query.q : '';\n        this.posts = res.data.posts;\n        this.$store.commit('Load', false);\n      });\n    },\n    query(asc) {\n      const query = {};\n      if (asc === 'asc') query.timeSort = 'asc';\n      if (this.search !== '') query.q = this.search;\n      if (!asc && this.search === '') query.timeSort = this.$route.query.timeSort;\n      return query;\n    },\n    toggle() {\n      this.select = !this.select;\n    },\n    filterDropdownClick(e) {\n      if (this.$refs.filterDropdown) {\n        const isSelf = this.$refs.filterWrapper.contains(e.target);\n        if (!isSelf) {\n          this.select = false;\n        }\n      }\n    },\n    searchEnter() {\n      this.$router.push({\n        query: this.query(),\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.posts-wall {\n  display: grid;\n  grid-gap: 1rem;\n  width: 100%;\n}\n\n.subnav {\n  display: grid;\n  grid-gap: 0.75rem;\n  grid-template-columns: 9.75rem 1fr;\n}\n\n.filter-wrapper {\n  position: relative;\n}\n\n.filter {\n  width: 100%;\n}\n\n.filter,\n.dropdown .btn {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  .material-icons {\n    font-size: 1.25rem;\n  }\n}\n\n.dropdown-wrapper {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  transform: translateY(calc(100% - 2px));\n}\n\n.dropdown {\n  transform: translate(-5px, -5px);\n\n  li {\n    &:not(:last-child) {\n      border-bottom: 2px solid $black;\n    }\n    &:hover {\n      background: $grey-light;\n    }\n  }\n}\n\n.filter,\n.search label,\n.dropdown .btn {\n  padding: 0.75rem 1rem;\n}\n\n.search {\n  display: grid;\n  grid-template-columns: 1fr 2.875rem;\n\n  label {\n    border-right: 2px solid $black;\n  }\n\n  input {\n    width: 100%;\n\n    outline: none;\n    border: 0;\n  }\n\n  .btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background: $blue-dark;\n\n    color: $white;\n\n    transition: $transition-1;\n    &:hover {\n      background: $yellow;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"post border bg-white radius\">\n    <!-- 貼文資訊 -->\n    <div class=\"header\">\n      <div class=\"user-photo border circle\">\n        <img @load=\"successLoadImg\" :src=\"photo\" alt=\"\" class=\"hide\" />\n      </div>\n      <div class=\"info\">\n        <router-link to=\"/\" class=\"btn\">{{ post.user.name }}</router-link>\n        <span>{{ $filters.date(post.createdAt) }}</span>\n      </div>\n    </div>\n\n    <!-- 貼文內容 -->\n    <p>\n      {{ post.content }}\n    </p>\n\n    <!-- 貼文圖片 -->\n    <div v-if=\"post.image\" class=\"image-wrapper border radius\">\n      <div class=\"clamp\" :style=\"paddingBottom\">\n        <img\n          ref=\"postsPhoto\"\n          @load=\"successLoadImg, size()\"\n          :src=\"post.image\"\n          alt=\"\"\n          class=\"hide\"\n        />\n      </div>\n    </div>\n\n    <!-- 按讚 -->\n    <button\n      type=\"button\"\n      class=\"likes btn\"\n      :class=\"{ selected: isSelected }\"\n      @click=\"toggle(isSelected)\"\n    >\n      <span class=\"material-icons\"> thumb_up_off_alt </span>\n      {{ post.likes.length == 0 ? '成為第一個按讚的朋友' : post.likes.length }}\n    </button>\n\n    <!-- 留言 -->\n    <div class=\"comment-wrapper\">\n      <div class=\"user-photo circle border\">\n        <img @load=\"successLoadImg\" :src=\"user.photo\" alt=\"\" class=\"hide\" />\n      </div>\n      <div class=\"comment border\">\n        <label for=\"comment\">\n          <input\n            id=\"comment\"\n            type=\"text\"\n            placeholder=\"留言...\"\n            v-model=\"comment\"\n            @keyup.enter=\"comment\"\n          />\n        </label>\n        <button type=\"button\" class=\"btn\" @click=\"send\">留言</button>\n      </div>\n    </div>\n\n    <div v-for=\"(comment, key) in post.comments\" :key=\"key\" class=\"comments\">\n      <div class=\"header\">\n        <div class=\"user-photo border circle\">\n          <img\n            @load=\"successLoadImg\"\n            :src=\"comment.user.photo !== '' ? comment.user.photo : commentPhoto\"\n            alt=\"\"\n            class=\"hide\"\n          />\n        </div>\n        <div class=\"info\">\n          <router-link to=\"/\" class=\"btn\">{{ comment.user.name }}</router-link>\n          <span>{{ $filters.date(comment.createdAt) }}</span>\n        </div>\n      </div>\n      <p>\n        {{ comment.comment }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PostsCom',\n  props: ['tempPost'],\n  data() {\n    return {\n      post: {},\n      comment: '',\n      paddingBottom: {},\n      commentPhoto: process.env.VUE_APP_USER_PHOTO,\n    };\n  },\n  watch: {\n    tempPost: {\n      handler() {\n        this.post = this.tempPost;\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    photo() {\n      const { photo } = this.post.user;\n      if (photo === '') return `${process.env.VUE_APP_USER_PHOTO}`;\n      return photo;\n    },\n    isSelected() {\n      const { likes } = this.post;\n      return likes.includes(this.user._id);\n    },\n  },\n  methods: {\n    isToday(date) {\n      return this.moment(date).format('YYYY/MM/DD hh:mm');\n    },\n    toggle(isSelected) {\n      this.$store.commit('Load', true);\n      const api = `${process.env.VUE_APP_API}/post/${this.post._id}/likes`;\n      const { headers } = this.$store.state;\n      const method = isSelected\n        ? this.$http.delete(api, headers)\n        : this.$http.post(api, null, headers);\n\n      method\n        .then(() => {\n          this.upload();\n        })\n        .catch((err) => {\n          console.error(err);\n        })\n        .then(() => {\n          this.$store.commit('Load', false);\n        });\n    },\n    send() {\n      if (this.comment !== '') {\n        this.$store.commit('Load', true);\n        const api = `${process.env.VUE_APP_API}/post/${this.post._id}/comment`;\n        const { headers } = this.$store.state;\n        const comment = {\n          comment: this.comment,\n        };\n\n        this.$http\n          .post(api, comment, headers)\n          .then(() => {\n            this.comment = '';\n            this.upload();\n          })\n          .catch((err) => {\n            console.error(err);\n          })\n          .then(() => {\n            this.$store.commit('Load', false);\n          });\n      }\n    },\n    upload() {\n      this.$store.commit('Load', true);\n      const api = `${process.env.VUE_APP_API}/post/${this.post._id}`;\n      const { headers } = this.$store.state;\n      this.$http\n        .get(api, headers)\n        .then((res) => {\n          this.post = res.data.post;\n        })\n        .catch((err) => {\n          console.error(err);\n        })\n        .then(() => {\n          this.$store.commit('Load', false);\n        });\n    },\n    size() {\n      if (this.$refs.postsPhoto) {\n        const { height } = this.$refs.postsPhoto;\n        const { width } = this.$refs.postsPhoto;\n        const ratio = (height / width) * 100;\n        this.paddingBottom = {\n          paddingBottom: ratio > 150 ? '150%' : `${ratio}%`,\n        };\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.post {\n  display: grid;\n  grid-gap: 1rem;\n  padding: 1.5rem;\n}\n\n.header {\n  display: grid;\n  grid-column-gap: 1rem;\n  grid-template-columns: 45px 1fr;\n  .user-photo {\n    width: 45px;\n    height: 45px;\n  }\n  .info {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n  }\n  a {\n    font-weight: bold;\n  }\n  span {\n    color: $grey-dark;\n    font-size: 0.75rem;\n  }\n}\n\n.image-wrapper {\n  background: $blue-light;\n\n  .clamp {\n    position: relative;\n    overflow: hidden;\n    padding-bottom: 52.35%;\n  }\n  img {\n    position: absolute;\n    display: block;\n    width: 100%;\n  }\n}\n\n.likes {\n  display: flex;\n  align-items: center;\n  width: fit-content;\n\n  color: $grey-dark;\n  &:hover {\n    color: $blue-dark;\n  }\n  span {\n    margin-right: 0.5rem;\n  }\n  &.selected {\n    color: $blue-dark;\n  }\n}\n\n.comment-wrapper {\n  display: grid;\n  grid-gap: 0.5rem;\n  grid-template-columns: 2.5rem 1fr;\n  .user-photo {\n    width: 2.5rem;\n    height: 2.5rem;\n  }\n  .comment {\n    display: flex;\n\n    label {\n      padding: 0.5rem 1rem;\n      width: 100%;\n\n      border-right: 2px solid $black;\n    }\n\n    input {\n      outline: none;\n      border: 0;\n    }\n\n    .btn {\n      padding: 0.5rem 3rem;\n\n      background: $blue-dark;\n\n      color: $white;\n\n      &:hover {\n        background: $yellow;\n      }\n    }\n  }\n}\n\n.comments {\n  padding: 1rem;\n\n  border-radius: 0.75rem;\n  background: $grey-light;\n  p {\n    margin-left: calc(45px + 1rem);\n  }\n}\n</style>\n","import { render } from \"./Posts.vue?vue&type=template&id=daed54e4&scoped=true\"\nimport script from \"./Posts.vue?vue&type=script&lang=js\"\nexport * from \"./Posts.vue?vue&type=script&lang=js\"\n\nimport \"./Posts.vue?vue&type=style&index=0&id=daed54e4&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\metawall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-daed54e4\"]])\n\nexport default __exports__","<template>\n  <div class=\"border bg-white posts-none radius\">\n    <ul class=\"ball-group\">\n      <li class=\"ball circle\" />\n      <li class=\"ball circle\" />\n      <li class=\"ball circle\" />\n    </ul>\n    <div class=\"content\">{{ message }}</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PostsNoneCom',\n  computed: {\n    message() {\n      if (this.$route.query.q) return `找不到符合「${this.$route.query.q}」的貼文`;\n      return '目前尚無動態，新增一則貼文吧！';\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.posts-none {\n  box-shadow: 0 3px 0 $black;\n}\n.ball-group {\n  display: flex;\n  padding: 1rem;\n\n  border-bottom: 1px solid $black;\n  .ball {\n    width: 0.5rem;\n    height: 0.5rem;\n\n    border: 1px $grey-darker solid;\n    background: $yellow-dark;\n    &:not(:last-child) {\n      margin-right: 6px;\n    }\n    &:first-child {\n      background: $pink-dark;\n    }\n    &:last-child {\n      background: $green;\n    }\n  }\n}\n.content {\n  padding: 2rem 1rem;\n\n  color: $grey-dark;\n  text-align: center;\n}\n\n</style>\n","import { render } from \"./PostsNone.vue?vue&type=template&id=5d805009&scoped=true\"\nimport script from \"./PostsNone.vue?vue&type=script&lang=js\"\nexport * from \"./PostsNone.vue?vue&type=script&lang=js\"\n\nimport \"./PostsNone.vue?vue&type=style&index=0&id=5d805009&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\metawall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5d805009\"]])\n\nexport default __exports__","import { render } from \"./PostsWall.vue?vue&type=template&id=552a9dd2&scoped=true\"\nimport script from \"./PostsWall.vue?vue&type=script&lang=js\"\nexport * from \"./PostsWall.vue?vue&type=script&lang=js\"\n\nimport \"./PostsWall.vue?vue&type=style&index=0&id=552a9dd2&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\metawall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-552a9dd2\"]])\n\nexport default __exports__"],"names":["class","ref","_createElementVNode","for","_createElementBlock","type","onClick","$options","$data","_createVNode","_component_router_link","to","query","id","$event","placeholder","onKeyup","_hoisted_13","length","_createBlock","_component_PostsNone","key","_Fragment","_renderList","item","_component_Posts","_id","tempPost","onLoad","_ctx","src","alt","user","name","_toDisplayString","date","createdAt","content","image","style","selected","_hoisted_8","likes","photo","comments","comment","props","data","post","paddingBottom","commentPhoto","process","watch","handler","this","deep","immediate","computed","$store","state","isSelected","includes","methods","isToday","moment","format","toggle","commit","api","headers","method","$http","delete","then","upload","catch","err","console","error","send","get","res","size","$refs","postsPhoto","height","width","ratio","__exports__","_hoisted_2","message","$route","q","components","Posts","PostsNone","select","posts","search","asc","mounted","getPosts","document","addEventListener","filterDropdownClick","beforeUnmount","removeEventListener","fullPath","authorization","localStorage","getItem","timeSort","e","filterDropdown","isSelf","filterWrapper","contains","target","searchEnter","$router","push","render"],"sourceRoot":""}