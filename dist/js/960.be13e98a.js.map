{"version":3,"file":"js/960.be13e98a.js","mappings":"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","sources":["webpack://metawall/./src/components/Title.vue","webpack://metawall/./src/components/Title.vue?1484","webpack://metawall/./src/views/Post.vue","webpack://metawall/./src/views/Post.vue?76a1"],"sourcesContent":["<template>\n  <div class=\"title\">\n    <h1 class=\"border bg-white\">{{ title }}</h1>\n    <div class=\"mat border bg-white\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'TitleCMPT',\n  props: ['title'],\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.title {\n  position: relative;\n}\n\nh1 {\n  position: relative;\n  z-index: 1;\n  padding: 1rem 0;\n\n  text-align: center;\n  font-size: 1.25rem;\n}\n\n.mat {\n  position: absolute;\n  top: 5px;\n  left: -5px;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import { render } from \"./Title.vue?vue&type=template&id=2e84f518&scoped=true\"\nimport script from \"./Title.vue?vue&type=script&lang=js\"\nexport * from \"./Title.vue?vue&type=script&lang=js\"\n\nimport \"./Title.vue?vue&type=style&index=0&id=2e84f518&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\metawall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2e84f518\"]])\n\nexport default __exports__","<template>\n  <div class=\"post\">\n    <Title :title=\"'張貼動態'\" />\n    <VForm v-slot=\"{ errors }\" @submit=\"createPosts\" class=\"border bg-white radius\">\n      <label for=\"content\" class=\"content-wrapper\"\n        >貼文內容\n        <VField\n          id=\"content\"\n          name=\"內容\"\n          v-model=\"content\"\n          placeholder=\"輸入您的貼文內容\"\n          class=\"content border\"\n          rules=\"required\"\n          as=\"textarea\"\n        />\n        <error-message name=\"內容\" />\n      </label>\n      <label for=\"uploadImage\" class=\"btn upload\">\n        上傳圖片\n        <VField\n          id=\"uploadImage\"\n          name=\"uploadImage\"\n          type=\"file\"\n          class=\"hide\"\n          @change=\"upload(errors)\"\n          :rules=\"{ ext: ['jpg', 'png', 'jpeg'] }\"\n        />\n      </label>\n      <div class=\"image-wrapper border radius\">\n        <div class=\"clamp\" :style=\"paddingBottom\">\n          <div v-if=\"!image\" class=\"cover border cursor-none radius\">\n            <span class=\"material-icons\"> image </span>\n          </div>\n          <template v-if=\"image\">\n            <img ref=\"postsPhoto\" @load=\"successLoadImg, size()\" :src=\"image\" alt=\"\" class=\"hide\" />\n            <button type=\"button\" class=\"btn border clear circle\" @click=\"clearImg\">\n              <span class=\"material-icons\"> close </span>\n            </button>\n          </template>\n        </div>\n      </div>\n      <error-message name=\"uploadImage\">\n        <div class=\"error-message\">圖片格式錯誤，僅限 JPG、PNG 圖片</div>\n      </error-message>\n      <div v-if=\"errMessage\" class=\"error-message\">{{ errMessage }}</div>\n      <div class=\"submit-wrapper\">\n        <button type=\"submit\" class=\"btn border submit\" :disabled=\"disabled(errors)\">\n          送出貼文\n        </button>\n      </div>\n    </VForm>\n  </div>\n</template>\n\n<script>\nimport Title from '@/components/Title.vue';\n\nexport default {\n  name: 'PostView',\n  components: {\n    Title,\n  },\n  data() {\n    return {\n      content: '',\n      image: '',\n      err: true,\n      errMessage: '',\n      paddingBottom: {},\n    };\n  },\n  methods: {\n    createPosts() {\n      this.$store.commit('Load', true);\n      const api = `${process.env.VUE_APP_API}/post`;\n      const { headers } = this.$store.state;\n\n      const data = {\n        user: this.$store.state.user._id,\n        image: this.image,\n        content: this.content,\n      };\n      this.$http\n        .post(api, data, headers)\n        .then(() => {\n          this.$router.push({ name: 'posts_wall' });\n        })\n        .catch((err) => {\n          console.error(err);\n        })\n        .then(() => {\n          this.$store.commit('Load', false);\n        });\n    },\n    async upload(errors) {\n      this.errMessage = '';\n      this.image = '';\n      if (errors.uploadImage === undefined) {\n        this.$store.commit('Load', true);\n        const uploadedFile = document.getElementById('uploadImage').files[0];\n        const formData = new FormData();\n        formData.append('file-to-upload', uploadedFile);\n        const api = `${process.env.VUE_APP_API}/upload/post`;\n        const { headers } = this.$store.state;\n        this.$http\n          .post(api, formData, headers)\n          .then((res) => {\n            const { imgUrl } = res.data;\n            this.image = imgUrl;\n          })\n          .catch((err) => {\n            this.errMessage = err.response.data.message;\n          })\n          .then(() => {\n            this.$store.commit('Load', false);\n          });\n      }\n    },\n    clearImg() {\n      this.image = '';\n      this.paddingBottom = {\n        paddingBottom: '52.35%',\n      };\n    },\n    disabled(errors) {\n      const err = Object.keys(errors).length;\n      if (this.content && err === 0) return false;\n      return true;\n    },\n    size() {\n      if (this.$refs.postsPhoto) {\n        const { height } = this.$refs.postsPhoto;\n        const { width } = this.$refs.postsPhoto;\n        const ratio = (height / width) * 100;\n        this.paddingBottom = {\n          paddingBottom: ratio > 150 ? '150%' : `${ratio}%`,\n        };\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.post {\n  display: grid;\n  grid-gap: 1rem;\n}\n\nform {\n  padding: 2rem;\n}\n\n.content-wrapper {\n  display: block;\n  margin-bottom: 1rem;\n\n  font-weight: Normal;\n  font-size: 1rem;\n  span {\n    color: $pink;\n    font-size: 0.875rem;\n  }\n}\n\n.content {\n  display: block;\n  margin-top: 0.25rem;\n  padding: 0.75rem 1rem;\n  width: 100%;\n  height: 10.5rem;\n\n  outline: none;\n\n  resize: none;\n}\n\n.upload {\n  display: inline-block;\n  margin-bottom: 1rem;\n  padding: 0.25rem 2rem;\n\n  border-radius: 0.25rem;\n  background: $black;\n\n  color: $white;\n  line-height: 1.5em;\n  &:hover {\n    background: $blue-dark;\n  }\n}\n\n.image-wrapper {\n  overflow: hidden;\n  margin-bottom: 2rem;\n\n  background: $blue-light;\n\n  .clamp {\n    position: relative;\n    padding-bottom: 52.35%;\n  }\n  .clear {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2.25rem;\n    height: 2.25rem;\n\n    background: $blue-light;\n    &:hover {\n      background: $blue-dark;\n\n      color: $white;\n\n      transition: $transition-1;\n    }\n  }\n\n  img {\n    position: absolute;\n    display: block;\n    width: 100%;\n  }\n  .cover {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    justify-content: center;\n    width: calc(100% - 2rem);\n    height: calc(100% - 2rem);\n\n    border: 2px dashed $grey-translucent;\n\n    color: $grey-translucent;\n    vertical-align: middle;\n    font-size: 1.25rem;\n\n    transform: translate(-50%, -50%);\n    span {\n      font-size: 5.75rem;\n    }\n  }\n}\n\n.error-message {\n  margin-bottom: 1rem;\n\n  text-align: center;\n}\n\n.submit-wrapper {\n  padding: 0 4.5rem;\n}\n</style>\n","import { render } from \"./Post.vue?vue&type=template&id=3f3d352b&scoped=true\"\nimport script from \"./Post.vue?vue&type=script&lang=js\"\nexport * from \"./Post.vue?vue&type=script&lang=js\"\n\nimport \"./Post.vue?vue&type=style&index=0&id=3f3d352b&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\metawall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3f3d352b\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_toDisplayString","$props","_hoisted_3","name","props","__exports__","render","for","_hoisted_8","_hoisted_11","_createVNode","_component_Title","title","_component_VForm","onSubmit","$options","errors","_component_VField","id","$data","$event","placeholder","rules","as","_component_error_message","type","onChange","ext","style","_hoisted_9","_Fragment","key","ref","onLoad","_ctx","src","alt","onClick","_hoisted_13","disabled","_hoisted_16","components","Title","data","content","image","err","errMessage","paddingBottom","methods","createPosts","this","$store","commit","api","headers","state","user","_id","$http","post","then","$router","push","catch","console","error","async","undefined","uploadImage","uploadedFile","document","getElementById","files","formData","FormData","append","res","imgUrl","response","message","clearImg","Object","keys","length","size","$refs","postsPhoto","height","width","ratio"],"sourceRoot":""}