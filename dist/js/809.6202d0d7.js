"use strict";(self["webpackChunkmetawall"]=self["webpackChunkmetawall"]||[]).push([[809],{2809:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var o=s(3396);const r={class:"posts-wall"},n={class:"container"};function a(e,t,s,a,l,i){const c=(0,o.up)("Header"),d=(0,o.up)("router-view"),m=(0,o.up)("AsideNav");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(c),(0,o._)("main",n,[(0,o._)("article",null,[(0,o.Wm)(d)]),(0,o._)("aside",null,[(0,o.Wm)(m)])])])}const l=e=>((0,o.dD)("data-v-7e67963f"),e=e(),(0,o.Cn)(),e),i={class:"container"},c=(0,o.Uk)("MetaWall"),d={ref:"memberWrapper",class:"member-wrapper"},m={class:"user-photo border circle"},u=["src"],p=l((()=>(0,o._)("span",{class:"member-text"},"Member",-1))),b={key:0,ref:"memberDropdown",class:"border bg-white dropdown-wrapper"},h={class:"border bg-white dropdown"},f={class:"btn"},w=(0,o.Uk)(" 我的貼文牆 "),_={class:"btn"},g=(0,o.Uk)(" 修改個人資料 ");function v(e,t,s,r,n,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("header",null,[(0,o._)("div",i,[(0,o.Wm)(l,{to:"/",class:"btn logo"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o._)("div",d,[(0,o._)("button",{type:"button",class:"member-btn btn",onClick:t[1]||(t[1]=e=>a.toggle())},[(0,o._)("div",m,[(0,o._)("img",{onLoad:t[0]||(t[0]=(...t)=>e.successLoadImg&&e.successLoadImg(...t)),src:a.user.photo,alt:"",class:"hide"},null,40,u)]),p]),n.select?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("ul",h,[(0,o._)("li",f,[(0,o.Wm)(l,{to:{path:`/profile/${a.user._id}`},class:"btn link",onClick:a.toggle},{default:(0,o.w5)((()=>[w])),_:1},8,["to","onClick"])]),(0,o._)("li",_,[(0,o.Wm)(l,{to:{path:"/setting"},class:"btn link",onClick:a.toggle},{default:(0,o.w5)((()=>[g])),_:1},8,["onClick"])]),(0,o._)("li",{class:"btn",onClick:t[2]||(t[2]=e=>a.signOut()),onKeyup:t[3]||(t[3]=e=>a.signOut())},"登出",32)])],512)):(0,o.kq)("",!0)],512)])])}var k={name:"HeaderCMPT",data(){return{select:!1}},mounted(){document.addEventListener("click",this.memberDropdownClick),window.addEventListener("resize",this.memberDropdownOffset)},updated(){this.$refs.memberDropdown&&this.memberDropdownOffset()},beforeUnmount(){document.removeEventListener("click",this.memberDropdownClick),window.removeEventListener("resize",this.memberDropdownOffset)},watch:{$route(){this.select=!1}},computed:{user(){const{user:e}=this.$store.state;return e}},methods:{toggle(){this.select=!this.select},memberDropdownClick(e){if(this.$refs.memberDropdown){const t=this.$refs.memberWrapper.contains(e.target);t||(this.select=!1)}},memberDropdownOffset(){if(this.$refs.memberDropdown){const e=getComputedStyle(document.documentElement).fontSize.replace(/[^0-9]+(.[0-9]{2})?$/gi,""),t=document.body.clientWidth,s=this.$refs.memberDropdown.getBoundingClientRect().width,o=this.$refs.memberWrapper.getBoundingClientRect().x;if(t-e<o+s){const r=t-s-o-e+5;this.$refs.memberDropdown.style.transform=`translate(${r}px,100%)`}}},signOut(){localStorage.removeItem("authorization"),this.$router.push({name:"sign_in"})}}},$=s(89);const D=(0,$.Z)(k,[["render",v],["__scopeId","data-v-7e67963f"]]);var C=D,W=s(7139);const L=e=>((0,o.dD)("data-v-4a57dd50"),e=e(),(0,o.Cn)(),e),I={class:"aside-nav border bg-white"},O=L((()=>(0,o._)("span",{class:"fw-bold btn post radius"}," 張貼動態 ",-1))),y=L((()=>(0,o._)("div",{class:"border btn circle"},[(0,o._)("span",{class:"material-icons"}," add ")],-1))),z={class:"user-photo border circle"},A=["src"],E={class:"fw-bold"},H=L((()=>(0,o._)("div",{class:"btn-icon border circle"},[(0,o._)("span",{class:"material-icons"}," notifications_none ")],-1))),M=L((()=>(0,o._)("span",{class:"fw-bold"},"追蹤名單",-1))),U=L((()=>(0,o._)("div",{class:"btn-icon border circle"},[(0,o._)("span",{class:"material-icons"}," thumb_up_off_alt ")],-1))),Z=L((()=>(0,o._)("span",{class:"fw-bold"},"我按讚的文章",-1)));function x(e,t,s,r,n,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("ul",I,[(0,o._)("li",null,[(0,o.Wm)(l,{to:"/post",class:"btn"},{default:(0,o.w5)((()=>[O,y])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(l,{to:{path:`/profile/${a.user._id}`},class:"btn link"},{default:(0,o.w5)((()=>[(0,o._)("div",z,[(0,o._)("img",{onLoad:t[0]||(t[0]=(...t)=>e.successLoadImg&&e.successLoadImg(...t)),src:a.user.photo,alt:"",class:"hide"},null,40,A)]),(0,o._)("span",E,(0,W.zw)(a.user.name),1)])),_:1},8,["to"])]),(0,o._)("li",null,[(0,o.Wm)(l,{to:{path:"/follow_list"},class:"btn link"},{default:(0,o.w5)((()=>[H,M])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(l,{to:{path:"/like_list"},class:"btn link"},{default:(0,o.w5)((()=>[U,Z])),_:1})])])}var N={name:"AsideNavCMPT",computed:{user(){const{user:e}=this.$store.state;return e}}};const S=(0,$.Z)(N,[["render",x],["__scopeId","data-v-4a57dd50"]]);var B=S,P={name:"HomeView",components:{Header:C,AsideNav:B},created(){this.$store.commit("Load",!0);const e="https://agile-anchorage-83053.herokuapp.com/user/profile",{headers:t}=this.$store.state;this.$http.get(e,t).then((e=>{const{user:t}=e.data;delete t.followers,delete t.following,""===t.photo&&(t.photo="https://i.imgur.com/IZLtAAb.jpg"),this.$store.commit("user",t)})).catch((e=>{console.error(e)})).then((()=>{this.$store.commit("Load",!1)}))}};const R=(0,$.Z)(P,[["render",a],["__scopeId","data-v-6ce0271b"]]);var T=R}}]);
//# sourceMappingURL=809.6202d0d7.js.map