{"version":3,"file":"js/964.f0594762.js","mappings":"yOACOA,MAAM,Y,GAGAA,MAAM,gBAAgBC,IAAI,Y,UAC/BC,EAAAA,EAAAA,IAA8B,OAAzBF,MAAM,SAAQ,SAAK,K,UAWtBE,EAAAA,EAAAA,IAAkE,QAA5DF,MAAM,iBAAgB,mCAA+B,K,GAIxDA,MAAM,gBAAgBC,IAAI,mB,UAC/BC,EAAAA,EAAAA,IAA6B,OAAxBF,MAAM,SAAQ,QAAI,K,oIApB7BG,EAAAA,EAAAA,IAkCM,MAlCNC,EAkCM,EAjCJC,EAAAA,EAAAA,IAgCQC,EAAAA,CAhCoBC,SAAQC,EAAAA,SAAO,C,kBAEzC,EAFeC,YAAM,EAErBP,EAAAA,EAAAA,IAcQ,QAdRQ,EAcQ,CAbNC,GACAN,EAAAA,EAAAA,IAQEO,EAAAA,CAPAC,GAAG,W,WACMC,EAAAA,S,qCAAAA,EAAAA,SAAQ,GACjBd,MAAM,SACNe,KAAK,MACLC,KAAK,WACLC,YAAY,SACXC,MAAO,CAAAC,MAAAA,+C,gCAEVd,EAAAA,EAAAA,IAEgBe,EAAAA,CAFDL,KAAK,OAAK,C,kBACvB,IAAkE,CAAlEM,K,SAIJnB,EAAAA,EAAAA,IAYQ,QAZRoB,EAYQ,CAXNC,GACAlB,EAAAA,EAAAA,IAQEO,EAAAA,CAPAC,GAAG,kB,WACMC,EAAAA,gB,qCAAAA,EAAAA,gBAAe,GACxBd,MAAM,SACNe,KAAK,OACLC,KAAK,WACLC,YAAY,UACZC,MAAM,kB,wBAERb,EAAAA,EAAAA,IAAmDe,EAAAA,CAApCpB,MAAM,gBAAgBe,KAAK,YAE5Cb,EAAAA,EAAAA,IAA0F,UAAlFF,MAAM,oBAAoBgB,KAAK,SAAUQ,SAAUhB,EAAAA,SAASC,IAAS,OAAI,Q,uBAMvF,OACEM,KAAM,eAENU,IAAAA,GACE,MAAO,CACLC,SAAU,GACVC,gBAAiB,GAErB,EACAC,SAAU,CAAC,EACXC,MAAO,CAAC,EACRC,QAAS,CACPN,QAAAA,CAASf,GACP,MAAM,gBAAEkB,EAAe,SAAED,GAAaK,KAChCC,EAAMC,OAAOC,KAAKzB,GAAQ0B,OAChC,OAAIR,IAAmBD,GAAoB,IAARM,CAErC,EACAI,OAAAA,GACEL,KAAKM,OAAOC,OAAO,QAAQ,GAC3B,MAAMC,EAAO,kEACP,QAAEC,GAAYT,KAAKM,OAAOI,MAC1BhB,EAAO,CACXC,SAAUK,KAAKL,SACfC,gBAAiBI,KAAKJ,iBAGxBI,KAAKW,MACFC,MAAMJ,EAAKd,EAAMe,GACjBI,MAAMC,IACL,MAAMC,EAAS,UAASD,EAAIpB,KAAKsB,KAAKD,QACtCE,aAAaC,QAAQ,gBAAiBH,GACtCf,KAAKmB,MAAM,CACTC,MAAO,QACPC,KAAM,UACNC,YAAa,CACXC,QAAS,YACTF,KAAM,cAER,IAEHG,OAAOvB,IACNwB,QAAQC,MAAMzB,EAAI,IAEnBY,MAAK,KACJb,KAAKM,OAAOC,OAAO,QAAQ,EAAM,GAEvC,I,UC/EJ,MAAMoB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://metawall/./src/views/Security.vue","webpack://metawall/./src/views/Security.vue?836f"],"sourcesContent":["<template>\n  <div class=\"security\">\n    <VForm v-slot=\"{ errors }\" @submit=\"updated\">\n      <!-- 新密碼 -->\n      <label class=\"input-wrapper\" for=\"password\">\n        <div class=\"title\">輸入新密碼</div>\n        <VField\n          id=\"password\"\n          v-model=\"password\"\n          class=\"border\"\n          name=\"新密碼\"\n          type=\"password\"\n          placeholder=\"請輸入新密碼\"\n          :rules=\"{ regex: /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/ }\"\n        />\n        <error-message name=\"新密碼\">\n          <span class=\"error-message\"> Password 不能小於 8 個字元，需包含大小寫和數字 </span>\n        </error-message>\n      </label>\n      <!-- 再次輸入 -->\n      <label class=\"input-wrapper\" for=\"confirmPassword\">\n        <div class=\"title\">再次輸入</div>\n        <VField\n          id=\"confirmPassword\"\n          v-model=\"confirmPassword\"\n          class=\"border\"\n          name=\"再次輸入\"\n          type=\"password\"\n          placeholder=\"再次輸入新密碼\"\n          rules=\"confirmed:@新密碼\"\n        />\n        <error-message class=\"error-message\" name=\"再次輸入\" />\n      </label>\n      <button class=\"btn border submit\" type=\"submit\" :disabled=\"disabled(errors)\">重設密碼</button>\n    </VForm>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SecurityView',\n\n  data() {\n    return {\n      password: '',\n      confirmPassword: ''\n    }\n  },\n  computed: {},\n  watch: {},\n  methods: {\n    disabled(errors) {\n      const { confirmPassword, password } = this\n      const err = Object.keys(errors).length\n      if (confirmPassword && password && err === 0) return false\n      return true\n    },\n    updated() {\n      this.$store.commit('Load', true)\n      const api = `${process.env.VUE_APP_API}/user/updatePassword`\n      const { headers } = this.$store.state\n      const data = {\n        password: this.password,\n        confirmPassword: this.confirmPassword\n      }\n\n      this.$http\n        .patch(api, data, headers)\n        .then((res) => {\n          const token = `Bearer ${res.data.user.token}`\n          localStorage.setItem('authorization', token)\n          this.$swal({\n            title: '密碼已更新',\n            icon: 'success',\n            customClass: {\n              actions: 'customize',\n              icon: 'customize'\n            }\n          })\n        })\n        .catch((err) => {\n          console.error(err)\n        })\n        .then(() => {\n          this.$store.commit('Load', false)\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.title {\n  margin-bottom: 0.25rem;\n}\n.input-wrapper {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n  .border {\n    padding: 0.75rem 1rem;\n  }\n}\n.error-message {\n  margin-top: 0.25rem;\n\n  color: $pink;\n  text-align: start;\n  font-size: 0.875rem;\n}\n</style>\n\n","import { render } from \"./Security.vue?vue&type=template&id=44c33621&scoped=true\"\nimport script from \"./Security.vue?vue&type=script&lang=js\"\nexport * from \"./Security.vue?vue&type=script&lang=js\"\n\nimport \"./Security.vue?vue&type=style&index=0&id=44c33621&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Documents\\\\git\\\\metawall-front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44c33621\"]])\n\nexport default __exports__"],"names":["class","for","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_VForm","onSubmit","$options","errors","_hoisted_2","_hoisted_3","_component_VField","id","$data","name","type","placeholder","rules","regex","_component_error_message","_hoisted_4","_hoisted_5","_hoisted_6","disabled","data","password","confirmPassword","computed","watch","methods","this","err","Object","keys","length","updated","$store","commit","api","headers","state","$http","patch","then","res","token","user","localStorage","setItem","$swal","title","icon","customClass","actions","catch","console","error","__exports__","render"],"sourceRoot":""}