"use strict";(self["webpackChunkmetawall"]=self["webpackChunkmetawall"]||[]).push([[253],{6253:function(e,t,s){s.r(t),s.d(t,{default:function(){return Y}});var o=s(3396);const n={class:"posts-wall"},r={class:"container"};function a(e,t,s,a,l,i){const c=(0,o.up)("Header"),d=(0,o.up)("router-view"),m=(0,o.up)("AsideNav");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(c),(0,o._)("main",r,[(0,o._)("article",null,[(0,o.Wm)(d)]),(0,o._)("aside",null,[(0,o.Wm)(m)])])])}const l=e=>((0,o.dD)("data-v-7e67963f"),e=e(),(0,o.Cn)(),e),i={class:"container"},c=(0,o.Uk)("MetaWall"),d={ref:"memberWrapper",class:"member-wrapper"},m={class:"user-photo border circle"},u=["src"],p=l((()=>(0,o._)("span",{class:"member-text"},"Member",-1))),b={key:0,ref:"memberDropdown",class:"border bg-white dropdown-wrapper"},_={class:"border bg-white dropdown"},h={class:"btn"},f=(0,o.Uk)(" 我的貼文牆 "),w={class:"btn"},g=(0,o.Uk)(" 修改個人資料 ");function k(e,t,s,n,r,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("header",null,[(0,o._)("div",i,[(0,o.Wm)(l,{to:"/",class:"btn logo"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o._)("div",d,[(0,o._)("button",{type:"button",class:"member-btn btn",onClick:t[1]||(t[1]=e=>a.toggle())},[(0,o._)("div",m,[(0,o._)("img",{onLoad:t[0]||(t[0]=(...t)=>e.successLoadImg&&e.successLoadImg(...t)),src:a.user.photo,alt:"",class:"hide"},null,40,u)]),p]),r.select?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("ul",_,[(0,o._)("li",h,[(0,o.Wm)(l,{to:{path:`/profile/${a.user._id}`},class:"btn link",onClick:a.toggle},{default:(0,o.w5)((()=>[f])),_:1},8,["to","onClick"])]),(0,o._)("li",w,[(0,o.Wm)(l,{to:{path:"/setting"},class:"btn link",onClick:a.toggle},{default:(0,o.w5)((()=>[g])),_:1},8,["onClick"])]),(0,o._)("li",{class:"btn",onClick:t[2]||(t[2]=e=>a.signOut()),onKeyup:t[3]||(t[3]=e=>a.signOut())},"登出",32)])],512)):(0,o.kq)("",!0)],512)])])}var v={name:"HeaderCMPT",data(){return{select:!1}},mounted(){document.addEventListener("click",this.memberDropdownClick),window.addEventListener("resize",this.memberDropdownOffset)},updated(){this.$refs.memberDropdown&&this.memberDropdownOffset()},beforeUnmount(){document.removeEventListener("click",this.memberDropdownClick),window.removeEventListener("resize",this.memberDropdownOffset)},watch:{$route(){this.select=!1}},computed:{user(){const{user:e}=this.$store.state;return e}},methods:{toggle(){this.select=!this.select},memberDropdownClick(e){if(this.$refs.memberDropdown){const t=this.$refs.memberWrapper.contains(e.target);t||(this.select=!1)}},memberDropdownOffset(){if(this.$refs.memberDropdown){const e=getComputedStyle(document.documentElement).fontSize.replace(/[^0-9]+(.[0-9]{2})?$/gi,""),t=document.body.clientWidth,s=this.$refs.memberDropdown.getBoundingClientRect().width,o=this.$refs.memberWrapper.getBoundingClientRect().x;if(t-e<o+s){const n=t-s-o-e+5;this.$refs.memberDropdown.style.transform=`translate(${n}px,100%)`}}},signOut(){localStorage.removeItem("authorization"),this.$router.push({name:"sign_in"})}}},$=s(89);const C=(0,$.Z)(v,[["render",k],["__scopeId","data-v-7e67963f"]]);var D=C,W=s(7139);const L=e=>((0,o.dD)("data-v-6bef2228"),e=e(),(0,o.Cn)(),e),I={class:"aside-nav"},y={class:"nav border bg-white"},U=L((()=>(0,o._)("span",{class:"fw-bold btn post radius"}," 張貼動態 ",-1))),A=L((()=>(0,o._)("div",{class:"border btn circle"},[(0,o._)("span",{class:"material-icons"}," add ")],-1))),O={class:"user-photo border circle"},E=["src"],P={class:"fw-bold"},z=L((()=>(0,o._)("div",{class:"btn-icon border circle"},[(0,o._)("span",{class:"material-icons"}," notifications_none ")],-1))),H=L((()=>(0,o._)("span",{class:"fw-bold"},"追蹤名單",-1))),x=L((()=>(0,o._)("div",{class:"btn-icon border circle"},[(0,o._)("span",{class:"material-icons"}," thumb_up_off_alt ")],-1))),M=L((()=>(0,o._)("span",{class:"fw-bold"},"我按讚的文章",-1))),Z={class:"copyright border radius"},N={class:"external-link"},S=L((()=>(0,o._)("li",null,[(0,o._)("a",{href:"https://github.com/cutecat8110/metawall",class:"btn",target:"_blank"},[(0,o._)("span",{class:"material-icons"}," desktop_windows "),(0,o.Uk)(" 前端 ")])],-1))),B=["href"],R=L((()=>(0,o._)("span",{class:"material-icons"}," settings_ethernet ",-1))),T=(0,o.Uk)(" API "),V=[R,T],j=L((()=>(0,o._)("li",null,[(0,o._)("a",{href:"https://github.com/cutecat8110/metawall_backend",class:"btn",target:"_blank"},[(0,o._)("span",{class:"material-icons"}," storage "),(0,o.Uk)(" 後端 ")])],-1))),q=(0,o.Uk)(" Copyright © 2022 by Hao / 作品展示 ");function K(e,t,s,n,r,a){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",I,[(0,o._)("ul",y,[(0,o._)("li",null,[(0,o.Wm)(l,{to:"/post",class:"btn"},{default:(0,o.w5)((()=>[U,A])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(l,{to:{path:`/profile/${a.user._id}`},class:"btn link"},{default:(0,o.w5)((()=>[(0,o._)("div",O,[(0,o._)("img",{onLoad:t[0]||(t[0]=(...t)=>e.successLoadImg&&e.successLoadImg(...t)),src:a.user.photo,alt:"",class:"hide"},null,40,E)]),(0,o._)("span",P,(0,W.zw)(a.user.name),1)])),_:1},8,["to"])]),(0,o._)("li",null,[(0,o.Wm)(l,{to:{path:"/follow_list"},class:"btn link"},{default:(0,o.w5)((()=>[z,H])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(l,{to:{path:"/like_list"},class:"btn link"},{default:(0,o.w5)((()=>[x,M])),_:1})])]),(0,o._)("div",Z,[(0,o._)("ul",N,[S,(0,o._)("li",null,[(0,o._)("a",{href:`${e.process.env.VUE_APP_API}/api-docs/`,class:"btn",target:"_blank"},V,8,B)]),j]),q])])}var F={name:"AsideNavCMPT",computed:{user(){const{user:e}=this.$store.state;return e}}};const G=(0,$.Z)(F,[["render",K],["__scopeId","data-v-6bef2228"]]);var J=G,Q={name:"HomeView",components:{Header:D,AsideNav:J},created(){this.$store.commit("Load",!0);const e="https://metawall-backend-c89d.onrender.com/user/profile",{headers:t}=this.$store.state;this.$http.get(e,t).then((e=>{const{user:t}=e.data;delete t.followers,delete t.following,""===t.photo&&(t.photo="https://i.imgur.com/IZLtAAb.jpg"),this.$store.commit("user",t)})).catch((e=>{console.error(e)})).then((()=>{this.$store.commit("Load",!1)}))}};const X=(0,$.Z)(Q,[["render",a],["__scopeId","data-v-6ce0271b"]]);var Y=X}}]);
//# sourceMappingURL=253.b5ae952a.js.map