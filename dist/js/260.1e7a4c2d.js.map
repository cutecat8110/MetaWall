{"version":3,"file":"js/260.1e7a4c2d.js","mappings":"yOACOA,MAAM,Y,GAGAC,IAAI,WAAWD,MAAM,iB,UAC1BE,EAAAA,EAAAA,GAA8B,OAAzBF,MAAM,SAAQ,SAAK,K,UAWtBE,EAAAA,EAAAA,GAAkE,QAA5DF,MAAM,iBAAgB,mCAA+B,K,GAIxDC,IAAI,kBAAkBD,MAAM,iB,UACjCE,EAAAA,EAAAA,GAA6B,OAAxBF,MAAM,SAAQ,QAAI,K,oIApB7BG,EAAAA,EAAAA,IAkCM,MAlCN,EAkCM,EAjCJC,EAAAA,EAAAA,IAgCQC,EAAA,CAhCoBC,SAAQC,EAAAA,SAAO,C,kBAEzC,EAFeC,YAAM,EAErBN,EAAAA,EAAAA,GAcQ,QAdR,EAcQ,CAbNO,GACAL,EAAAA,EAAAA,IAQEM,EAAA,CAPAC,GAAG,WACHC,KAAK,MACLC,KAAK,W,WACIC,EAAAA,S,qCAAAA,EAAAA,SAAQC,GACjBC,YAAY,SACZhB,MAAM,SACLiB,MAAO,CAAAC,MAAAA,+CAPV,gCASAd,EAAAA,EAAAA,IAEgBe,EAAA,CAFDP,KAAK,OAAK,C,kBACvB,IAAkE,CAAlEQ,K,SAIJlB,EAAAA,EAAAA,GAYQ,QAZR,EAYQ,CAXNmB,GACAjB,EAAAA,EAAAA,IAQEM,EAAA,CAPAC,GAAG,kBACHC,KAAK,OACLC,KAAK,W,WACIC,EAAAA,gB,qCAAAA,EAAAA,gBAAeC,GACxBC,YAAY,UACZhB,MAAM,SACNiB,MAAM,kBAPR,wBASAb,EAAAA,EAAAA,IAAmDe,EAAA,CAApCnB,MAAM,gBAAgBY,KAAK,YAE5CV,EAAAA,EAAAA,GAA0F,UAAlFW,KAAK,SAASb,MAAM,oBAAqBsB,SAAUf,EAAAA,SAASC,IAAS,OAAI,EAAAe,M,KA/BnF,iB,CAqCJ,OACEX,KAAM,eAENY,OACE,MAAO,CACLC,SAAU,GACVC,gBAAiB,GAEpB,EACDC,SAAU,CAAC,EACXC,MAAO,CAAC,EACRC,QAAS,CACPP,SAASd,GACP,MAAM,gBAAEkB,EAAF,SAAmBD,GAAaK,KAChCC,EAAMC,OAAOC,KAAKzB,GAAQ0B,OAChC,OAAIR,IAAmBD,GAAoB,IAARM,CAEpC,EACDI,UACEL,KAAKM,OAAOC,OAAO,QAAQ,GAC3B,MAAMC,EAAO,kEACP,QAAEC,GAAYT,KAAKM,OAAOI,MAC1BhB,EAAO,CACXC,SAAUK,KAAKL,SACfC,gBAAiBI,KAAKJ,iBAGxBI,KAAKW,MACFC,MAAMJ,EAAKd,EAAMe,GACjBI,MAAMC,IACL,MAAMC,EAAS,UAASD,EAAIpB,KAAKsB,KAAKD,QACtCE,aAAaC,QAAQ,gBAAiBH,GACtCf,KAAKmB,MAAM,CACTC,MAAO,QACPC,KAAM,UACNC,YAAa,CACXC,QAAS,YACTF,KAAM,cALV,IASDG,OAAOvB,IACNwB,QAAQC,MAAMzB,EAAd,IAEDY,MAAK,KACJb,KAAKM,OAAOC,OAAO,QAAQ,EAA3B,GAEL,I,QC/EL,MAAMoB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://metawall/./src/views/Security.vue","webpack://metawall/./src/views/Security.vue?836f"],"sourcesContent":["<template>\n  <div class=\"security\">\n    <VForm v-slot=\"{ errors }\" @submit=\"updated\">\n      <!-- 新密碼 -->\n      <label for=\"password\" class=\"input-wrapper\">\n        <div class=\"title\">輸入新密碼</div>\n        <VField\n          id=\"password\"\n          name=\"新密碼\"\n          type=\"password\"\n          v-model=\"password\"\n          placeholder=\"請輸入新密碼\"\n          class=\"border\"\n          :rules=\"{ regex: /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/ }\"\n        />\n        <error-message name=\"新密碼\">\n          <span class=\"error-message\"> Password 不能小於 8 個字元，需包含大小寫和數字 </span>\n        </error-message>\n      </label>\n      <!-- 再次輸入 -->\n      <label for=\"confirmPassword\" class=\"input-wrapper\">\n        <div class=\"title\">再次輸入</div>\n        <VField\n          id=\"confirmPassword\"\n          name=\"再次輸入\"\n          type=\"password\"\n          v-model=\"confirmPassword\"\n          placeholder=\"再次輸入新密碼\"\n          class=\"border\"\n          rules=\"confirmed:@新密碼\"\n        />\n        <error-message class=\"error-message\" name=\"再次輸入\" />\n      </label>\n      <button type=\"submit\" class=\"btn border submit\" :disabled=\"disabled(errors)\">重設密碼</button>\n    </VForm>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SecurityView',\n\n  data() {\n    return {\n      password: '',\n      confirmPassword: '',\n    };\n  },\n  computed: {},\n  watch: {},\n  methods: {\n    disabled(errors) {\n      const { confirmPassword, password } = this;\n      const err = Object.keys(errors).length;\n      if (confirmPassword && password && err === 0) return false;\n      return true;\n    },\n    updated() {\n      this.$store.commit('Load', true);\n      const api = `${process.env.VUE_APP_API}/user/updatePassword`;\n      const { headers } = this.$store.state;\n      const data = {\n        password: this.password,\n        confirmPassword: this.confirmPassword,\n      };\n\n      this.$http\n        .patch(api, data, headers)\n        .then((res) => {\n          const token = `Bearer ${res.data.user.token}`;\n          localStorage.setItem('authorization', token);\n          this.$swal({\n            title: '密碼已更新',\n            icon: 'success',\n            customClass: {\n              actions: 'customize',\n              icon: 'customize',\n            },\n          });\n        })\n        .catch((err) => {\n          console.error(err);\n        })\n        .then(() => {\n          this.$store.commit('Load', false);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.title {\n  margin-bottom: 0.25rem;\n}\n.input-wrapper {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n  .border {\n    padding: 0.75rem 1rem;\n  }\n}\n.error-message {\n  margin-top: 0.25rem;\n\n  color: $pink;\n  text-align: start;\n  font-size: 0.875rem;\n}\n</style>\n","import { render } from \"./Security.vue?vue&type=template&id=f1e9bdfa&scoped=true\"\nimport script from \"./Security.vue?vue&type=script&lang=js\"\nexport * from \"./Security.vue?vue&type=script&lang=js\"\n\nimport \"./Security.vue?vue&type=style&index=0&id=f1e9bdfa&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\Git\\\\metawall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f1e9bdfa\"]])\n\nexport default __exports__"],"names":["class","for","_createElementVNode","_createElementBlock","_createVNode","_component_VForm","onSubmit","$options","errors","_hoisted_3","_component_VField","id","name","type","$data","$event","placeholder","rules","regex","_component_error_message","_hoisted_4","_hoisted_6","disabled","_hoisted_7","data","password","confirmPassword","computed","watch","methods","this","err","Object","keys","length","updated","$store","commit","api","headers","state","$http","patch","then","res","token","user","localStorage","setItem","$swal","title","icon","customClass","actions","catch","console","error","__exports__","render"],"sourceRoot":""}