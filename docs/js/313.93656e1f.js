"use strict";(self["webpackChunkmetawall"]=self["webpackChunkmetawall"]||[]).push([[313],{2587:function(t,e,s){s.d(e,{A:function(){return q}});var o=s(6768),r=s(4232),a=s(5130);const c=t=>((0,o.Qi)("data-v-7e57d052"),t=t(),(0,o.jt)(),t),i={class:"post border bg-white radius shadow"},n={class:"header"},l=["src"],d={class:"info"},h={class:"content"},u={key:0,class:"image-wrapper border radius"},p=["src"],m=c((()=>(0,o.Lk)("span",{class:"material-icons"}," thumb_up_off_alt ",-1))),k={class:"comment-wrapper"},b=["src"],f={class:"comment border"},L={for:"comment"},g={class:"header"},v=["src"],$={class:"info"};function _(t,e,s,c,_,w){const y=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",n,[(0,o.bF)(y,{class:"user-photo border circle btn",to:{path:`/profile/${_.post.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:w.photo,alt:"",onLoad:e[0]||(e[0]=(...e)=>t.successLoadImg&&t.successLoadImg(...e))},null,40,l)])),_:1},8,["to"]),(0,o.Lk)("div",d,[(0,o.bF)(y,{class:"btn fw-bold",to:{path:`/profile/${_.post.user._id}`}},{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(_.post.user.name),1)])),_:1},8,["to"]),(0,o.Lk)("span",null,(0,r.v_)(t.$filters.date(_.post.createdAt)),1)])]),(0,o.Lk)("p",h,(0,r.v_)(_.post.content),1),_.post.image?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",{class:"clamp",style:(0,r.Tr)(_.paddingBottom)},[(0,o.Lk)("img",{ref:"postsPhoto",class:"hide",src:_.post.image,alt:"",onLoad:e[1]||(e[1]=e=>(t.successLoadImg,w.size()))},null,40,p)],4)])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:(0,r.C4)([{selected:w.isSelected},"likes btn"]),type:"button",onClick:e[2]||(e[2]=t=>w.toggle(w.isSelected))},[m,(0,o.eW)(" "+(0,r.v_)(0==_.post.likes.length?"成為第一個按讚的朋友":_.post.likes.length),1)],2),(0,o.Lk)("div",k,[(0,o.bF)(y,{class:"user-photo border circle btn",to:{path:`/profile/${w.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:w.user.photo,alt:"",onLoad:e[3]||(e[3]=(...e)=>t.successLoadImg&&t.successLoadImg(...e))},null,40,b)])),_:1},8,["to"]),(0,o.Lk)("div",f,[(0,o.Lk)("label",L,[(0,o.bo)((0,o.Lk)("input",{id:"comment","onUpdate:modelValue":e[4]||(e[4]=t=>_.comment=t),type:"text",placeholder:"留言...",onKeyup:e[5]||(e[5]=(0,a.jR)(((...t)=>_.comment&&_.comment(...t)),["enter"]))},null,544),[[a.Jo,_.comment]])]),(0,o.Lk)("button",{class:"btn",type:"button",onClick:e[6]||(e[6]=(...t)=>w.send&&w.send(...t))},"留言")])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(_.post.comments,((s,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"comments"},[(0,o.Lk)("div",g,[(0,o.bF)(y,{class:"user-photo border circle btn",to:{path:`/profile/${s.user._id}`}},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"hide",src:""!==s.user.photo?s.user.photo:_.commentPhoto,alt:"",onLoad:e[7]||(e[7]=(...e)=>t.successLoadImg&&t.successLoadImg(...e))},null,40,v)])),_:2},1032,["to"]),(0,o.Lk)("div",$,[(0,o.bF)(y,{class:"btn fw-bold",to:{path:`/profile/${s.user._id}`}},{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(s.user.name),1)])),_:2},1032,["to"]),(0,o.Lk)("span",null,(0,r.v_)(t.$filters.date(s.createdAt)),1)])]),(0,o.Lk)("p",null,(0,r.v_)(s.comment),1)])))),128))])}var w={name:"PostsCMPT",props:["tempPost"],data(){return{post:{},comment:"",paddingBottom:{},commentPhoto:"https://i.imgur.com/IZLtAAb.jpg"}},watch:{tempPost:{handler(){this.post=this.tempPost},deep:!0,immediate:!0}},computed:{user(){return this.$store.state.user},photo(){const{photo:t}=this.post.user;return""===t?"https://i.imgur.com/IZLtAAb.jpg":t},isSelected(){const{likes:t}=this.post;return t.includes(this.user._id)}},methods:{isToday(t){return this.moment(t).format("YYYY/MM/DD hh:mm")},toggle(t){this.$store.commit("Load",!0);const e=`https://metawall-backend-c89d.onrender.com/post/${this.post._id}/likes`,{headers:s}=this.$store.state,o=t?this.$http.delete(e,s):this.$http.post(e,null,s);o.then((()=>{this.upload()})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))},send(){if(""!==this.comment){this.$store.commit("Load",!0);const t=`https://metawall-backend-c89d.onrender.com/post/${this.post._id}/comment`,{headers:e}=this.$store.state,s={comment:this.comment};this.$http.post(t,s,e).then((()=>{this.comment="",this.upload()})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))}},upload(){this.$store.commit("Load",!0);const t=`https://metawall-backend-c89d.onrender.com/post/${this.post._id}`,{headers:e}=this.$store.state;this.$http.get(t,e).then((t=>{this.post=t.data.post})).catch((t=>{console.error(t)})).then((()=>{this.$store.commit("Load",!1)}))},size(){if(this.$refs.postsPhoto){const{height:t}=this.$refs.postsPhoto,{width:e}=this.$refs.postsPhoto,s=t/e*100;this.paddingBottom={paddingBottom:s>150?"150%":`${s}%`}}}}},y=s(1241);const C=(0,y.A)(w,[["render",_],["__scopeId","data-v-7e57d052"]]);var q=C},6678:function(t,e,s){s.d(e,{A:function(){return p}});var o=s(6768),r=s(4232);const a=t=>((0,o.Qi)("data-v-78caa541"),t=t(),(0,o.jt)(),t),c={class:"border bg-white shadow radius"},i=a((()=>(0,o.Lk)("ul",{class:"ball-group"},[(0,o.Lk)("li",{class:"ball circle"}),(0,o.Lk)("li",{class:"ball circle"}),(0,o.Lk)("li",{class:"ball circle"})],-1))),n={class:"content"};function l(t,e,s,a,l,d){return(0,o.uX)(),(0,o.CE)("div",c,[i,(0,o.Lk)("div",n,(0,r.v_)(d.message),1)])}var d={name:"PostsNoneCMPT",computed:{message(){return this.$route.query.q?`找不到符合「${this.$route.query.q}」的貼文`:"profile"===this.$route.name?"目前尚無貼文":"like_list"===this.$route.name?"目前尚無動態，按讚一則貼文吧！":"follow_list"===this.$route.name?"目前尚無名單，追蹤一位朋友吧！":"目前尚無動態，新增一則貼文吧！"}}},h=s(1241);const u=(0,h.A)(d,[["render",l],["__scopeId","data-v-78caa541"]]);var p=u},5752:function(t,e,s){s.d(e,{A:function(){return w}});var o=s(6768),r=s(4232),a=s(5130);const c=t=>((0,o.Qi)("data-v-795e250a"),t=t(),(0,o.jt)(),t),i={class:"subnav"},n={ref:"filterWrapper",class:"filter-wrapper"},l=c((()=>(0,o.Lk)("span",{class:"material-icons"},"expand_more",-1))),d={key:0,ref:"filterDropdown",class:"border bg-white dropdown-wrapper"},h={class:"border bg-white dropdown"},u=(0,o.eW)(" 最新貼文 "),p={key:0,class:"material-icons"},m=(0,o.eW)(" 最舊貼文 "),k={key:0,class:"material-icons"},b={class:"border bg-white search"},f={for:"search"},L=c((()=>(0,o.Lk)("span",{class:"material-icons"}," search ",-1)));function g(t,e,s,c,g,v){const $=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",n,[(0,o.Lk)("button",{class:"btn border bg-white filter",type:"button",onClick:e[0]||(e[0]=t=>v.toggle())},[(0,o.eW)((0,r.v_)(g.asc?"最舊貼文":"最新貼文")+" ",1),l]),g.select?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("ul",h,[(0,o.Lk)("li",null,[(0,o.bF)($,{class:"btn",to:{query:v.query("desc")},onClick:e[1]||(e[1]=t=>v.toggle())},{default:(0,o.k6)((()=>[u,g.asc?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",p,"check"))])),_:1},8,["to"])]),(0,o.Lk)("li",null,[(0,o.bF)($,{class:"btn",to:{query:v.query("asc")},onClick:e[2]||(e[2]=t=>v.toggle())},{default:(0,o.k6)((()=>[m,g.asc?((0,o.uX)(),(0,o.CE)("span",k,"check")):(0,o.Q3)("",!0)])),_:1},8,["to"])])])],512)):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",b,[(0,o.Lk)("label",f,[(0,o.bo)((0,o.Lk)("input",{id:"search","onUpdate:modelValue":e[3]||(e[3]=t=>g.search=t),type:"text",placeholder:"搜尋貼文",onKeyup:e[4]||(e[4]=(0,a.jR)(((...t)=>v.searchEnter&&v.searchEnter(...t)),["enter"]))},null,544),[[a.Jo,g.search]])]),(0,o.bF)($,{class:"btn",to:{query:v.query()}},{default:(0,o.k6)((()=>[L])),_:1},8,["to"])])])}var v={name:"SubNavCMPT",data(){return{select:!1,posts:{},search:"",asc:!1}},mounted(){document.addEventListener("click",this.filterDropdownClick)},beforeUnmount(){document.removeEventListener("click",this.filterDropdownClick)},watch:{$route(){this.asc="asc"===this.$route.query.timeSort,this.search=this.$route.query.q?this.$route.query.q:""}},methods:{query(t){const e={};return"asc"===t&&(e.timeSort="asc"),""!==this.search&&(e.q=this.search),t||""!==this.search||(e.timeSort=this.$route.query.timeSort),e},toggle(){this.select=!this.select},filterDropdownClick(t){if(this.$refs.filterDropdown){const e=this.$refs.filterWrapper.contains(t.target);e||(this.select=!1)}},searchEnter(){this.$router.push({query:this.query()})}}},$=s(1241);const _=(0,$.A)(v,[["render",g],["__scopeId","data-v-795e250a"]]);var w=_}}]);
//# sourceMappingURL=313.93656e1f.js.map